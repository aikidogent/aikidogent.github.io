window.$clamp=function(i,e){e=e||{};var l,n=window,a={clamp:e.clamp||2,useNativeClamp:void 0===e.useNativeClamp||e.useNativeClamp,splitOnChars:e.splitOnChars||[".","-","–","—"," "],animate:e.animate||!1,truncationChar:e.truncationChar||"…",truncationHTML:e.truncationHTML},e=i.style,t=i.innerHTML,r=void 0!==i.style.webkitLineClamp,o=a.clamp,u=o.indexOf&&(-1<o.indexOf("px")||-1<o.indexOf("em"));function c(e,t){return n.getComputedStyle||(n.getComputedStyle=function(n,e){return this.el=n,this.getPropertyValue=function(e){var t=/(\-([a-z]){1})/g;return t.test(e="float"==e?"styleFloat":e)&&(e=e.replace(t,function(){return arguments[2].toUpperCase()})),n.currentStyle&&n.currentStyle[e]?n.currentStyle[e]:null},this}),n.getComputedStyle(e,null).getPropertyValue(t)}function s(e){var e=e||i.clientHeight,t=h(i);return Math.max(Math.floor(e/t),0)}function h(e){var t=c(e,"line-height");return"normal"==t&&(t=1.2*parseInt(c(e,"font-size"))),parseInt(t)}a.truncationHTML&&((l=document.createElement("span")).innerHTML=a.truncationHTML);var p,d,C,m=a.splitOnChars.slice(0),f=m[0];function g(e){return e.lastChild.children&&0<e.lastChild.children.length?g(Array.prototype.slice.call(e.children).pop()):e.lastChild&&e.lastChild.nodeValue&&""!=e.lastChild.nodeValue&&e.lastChild.nodeValue!=a.truncationChar?e.lastChild:(e.lastChild.parentNode.removeChild(e.lastChild),g(i))}function v(e,t){if(t){var n=e.nodeValue.replace(a.truncationChar,"");if(p||(f=0<m.length?m.shift():"",p=n.split(f)),1<p.length?(d=p.pop(),y(e,p.join(f))):p=null,l&&(e.nodeValue=e.nodeValue.replace(a.truncationChar,""),i.innerHTML=e.nodeValue+" "+l.innerHTML+a.truncationChar),p){if(i.clientHeight<=t){if(!(0<=m.length&&""!=f))return i.innerHTML;y(e,p.join(f)+f+d),p=null}}else""==f&&(y(e,""),e=g(i),m=a.splitOnChars.slice(0),f=m[0],d=p=null);if(!a.animate)return v(e,t);setTimeout(function(){v(e,t)},!0===a.animate?10:a.animate)}}function y(e,t){e.nodeValue=t+a.truncationChar}return"auto"==o?o=s():u&&(o=s(parseInt(o))),r&&a.useNativeClamp?(e.overflow="hidden",e.textOverflow="ellipsis",e.webkitBoxOrient="vertical",e.display="-webkit-box",e.webkitLineClamp=o,u&&(e.height=a.clamp+"px")):(r=o,(u=h(i)*r)<=i.clientHeight&&(C=v(g(i),u))),{original:t,clamped:C}};